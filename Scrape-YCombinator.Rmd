---
title: "YCombinator-scrape"
author: "Athena Ru"
date: '2022-07-02'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r libraries, echo=FALSE}
library(rvest)
library(dplyr)
library(stringr)
library(htmltools)
library(htmlwidgets)
library(reticulate)
```

## Read text from YCombinator "Ask HW" page

```{r extract}
link = "https://news.ycombinator.com/item?id=31582796"
page = read_html(link) %>% 
        html_nodes(".c00") %>%
        html_text()
comment <- str_trim(page)
```


## Extract First Line

```{r test-extract-first-line}
comment <- c(comment)
first_line <- str_extract(comment, "^[[[:graph:]^|]+[:space:]]+[|]{1}")
first_no_NA <- na.omit(first_line)
```


## Split First Line

```{python split}
list3 = [w.split('|') for w in list1]
for lst in list3:
  lst.remove('')
  lst = [i.strip() for i in lst]
  
name = [lst[0].strip() for lst in list3 if len(lst) > 3]
position = [lst[1].strip() for lst in list3 if len(lst) > 3]
location = [lst[2].strip() for lst in list3 if len(lst) > 3]
```

## Make dataframe

```{r dataframe}
df <- data.frame(py$name, py$position, py$location, stringsAsFactors = FALSE)
```

## Make csv file

```{r csv}
write.csv(df, "yCombinator.csv")
```


